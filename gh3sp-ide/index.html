<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç Dev-Gh3</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="logo">üîç Dev-Gh3</div>
        <nav>
            <button id="runBtn">Esegui</button>
        </nav>
    </header>
    <div id="editor"></div>
     <div id="console">
        <h2>Console</h2>
        <pre id="output"></pre>
    </div>

    <script src="node_modules/monaco-editor/min/vs/loader.js"></script>
    <script src="preload.js"></script>
    <script>
        let editor;
        require.config({ paths: { 'vs': 'node_modules/monaco-editor/min/vs' }});
        require(['vs/editor/editor.main'], function() {
          editor = monaco.editor.create(document.getElementById('editor'), {
            value: [
                'fn hello() {',
                '\tprint("Hello, world!")',
                '}',
                '',
                'hello()'
            ].join('\n'),
            language: 'gh3sp',
            theme: 'vs-dark',
            automaticLayout: true,
            inherit: true
          });
          // Definizione del linguaggio Gh3sp
          monaco.languages.register({ id: 'gh3sp' });

          // Definisci i token
          monaco.languages.setMonarchTokensProvider('gh3sp', {
              tokenizer: {
                  root: [
                      // Parole chiave
                      [/let|const|fn|if|else|for|while|foreach|in|import|true|false|null/, { token: 'keyword' }],
                      // Identificatori
                      [/[_a-zA-Z][\w]*/, { token: 'identifier' }],
                      // Numeri
                      [/\d+/, { token: 'number' }],
                      // Stringhe
                      [/["'][^"']*["']/, { token: 'string' }],
                      // Operatori
                      [/[+\-*\/=<>^?%\!]/, { token: 'operator' }],
                      // Simboli di raggruppamento
                      [/[.,:;?(){}\[\]=+\-*/%^!<>]/, { token: 'delimiter' }],
                      // Commenti
                      [/#.*$/, { token: 'comment' }],
                      [/\/\*.*\*\//, { token: 'comment.block' }],
                  ]
              }
          });

          monaco.editor.defineTheme('gh3spTheme', {
            base: 'vs-dark',
            inherit: true,
            rules: [
                { token: 'keyword', foreground: 'ce63eb', fontStyle: 'bold' }, // Colore per le parole chiave
                { token: 'delimiter', foreground: 'A6ACCE' }, // Colore per i delimitatori
                { token: 'operator', foreground: 'D19A66' }, // Colore per gli operatori
                { token: 'comment', foreground: 'aaaaaa', fontStyle: 'italic' }, // Colore per i commenti
                { token: 'string', foreground: 'CE9178' }, // Colore per le stringhe
                { token: 'number', foreground: 'B5CEA8' }, // Colore per i numeri
                { token: 'identifier', foreground: 'D19A66' }, // Colore per i numeri
            ],
            colors: {
                'editor.foreground': '#FFFFFF',
                'editor.background': '#1E1E1E',
                'editorCursor.foreground': '#FFFFFF',
                'editor.lineHighlightBackground': '#2A2A2A',
                // Altri colori di configurazione
            }
          });

          // Imposta il tema
          monaco.editor.setTheme('gh3spTheme');
        });

        document.getElementById('runBtn').addEventListener('click', () => {
            const code = editor.getValue();
            console.log(code)
            window.electron.sendCode(code);
        });

        window.electron.onCodeResponse((result) => {;
          document.getElementById('output').innerHTML = result; // Mostra l'output
        });
    </script>
</body>
</html>
